# Dialog Analyzer v5.1 - Risk-Aware Edition

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ —Å **–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–∏—Å–∫–æ–≤** –∏ 100% –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### üîí Immutable Data (Read-Only)
- **–ù–ï –∏–∑–º–µ–Ω—è–µ–º** –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ù–ï —É–¥–∞–ª—è–µ–º** –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- **–ù–ï –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º** –ø–æ–ª—è —Å NaN

### üé® Visual Risk Indication
- **–ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º** –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —É–∑–ª—ã —Ü–≤–µ—Ç–æ–º
- **–û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º** –≤—Å—ë "–∫–∞–∫ –µ—Å—Ç—å"
- **–ò–Ω–¥–∏—Ü–∏—Ä—É–µ–º** —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞

### üìÑ Audit Trail
- **–°–æ—Ö—Ä–∞–Ω—è–µ–º** –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º** –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–û—Å—Ç–∞–≤–ª—è–µ–º** —Ä–µ—à–µ–Ω–∏—è –∑–∞ —á–µ–ª–æ–≤–µ–∫–æ–º

---

## üåà –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ —Ä–∏—Å–∫–æ–≤

| –£—Ä–æ–≤–µ–Ω—å | –¶–≤–µ—Ç | Hex | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|------|---------|-------------|
| **CRITICAL** | üî¥ –ö—Ä–∞—Å–Ω—ã–π | `#FF4444` | –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å—Ü–µ–Ω–∞—Ä–∏—è |
| **HIGH** | üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π | `#FF8844` | –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º –≤ runtime |
| **MEDIUM** | üü° –ñ—ë–ª—Ç—ã–π | `#FFCC44` | –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã |
| **LOW** | üîµ –ì–æ–ª—É–±–æ–π | `#88CCFF` | –ú–∏–Ω–æ—Ä–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è |
| **INFO** | ‚ö™ –°–µ—Ä—ã–π | `#CCCCCC` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤

#### üî¥ Critical (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ)
- **–î—É–±–ª–∏–∫–∞—Ç intent_id** - –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- **–ü—É—Å—Ç—ã–µ answers** - –¥–∏–∞–ª–æ–≥ –Ω–µ —Å–º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å
- **Broken redirect** - —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ–Ω—Ç

#### üü† High (–í—ã—Å–æ–∫–∏–µ)
- **NaN –∑–Ω–∞—á–µ–Ω–∏—è** - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ record_type** - –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω —Ç–∏–ø
- **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã** - –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ª—É–ø

#### üü° Medium (–°—Ä–µ–¥–Ω–∏–µ)
- **–ü—É—Å—Ç—ã–µ inputs** - –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
- **Dead end** - –¥–∏–∞–ª–æ–≥ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è

#### üîµ Low (–ù–∏–∑–∫–∏–µ)
- **–î—É–±–ª–∏–∫–∞—Ç title** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- **–°–ª–æ–∂–Ω—ã–π regex** - —Ç—Ä—É–¥–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

#### ‚ö™ Info (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ)
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥–≥—Ä–∞—Ñ** - –Ω–µ —Å–≤—è–∑–∞–Ω —Å main

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö (100% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- **9 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–Ω—Ç–µ–Ω—Ç–æ–≤**: Main Intent, —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, Actions, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞, –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏, A/B-—Ç–µ—Å—Ç—ã, –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –æ—à–∏–±–∫–∏ LLM
- **–ü–æ–¥—Ç–∏–ø—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤**: loyalty_program, ab_test, llm_fallback, mobile_app_support, personal_cabinet, policy_management, insurance_products
- **NER –∞–Ω–∞–ª–∏–∑**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π
- **–ú–µ–∂—Å—Ü–µ–Ω–∞—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑**: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (6-—Ñ–∞–∑–Ω–∞—è)
1. **Intent IDs** - —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
2. **Titles** - –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏–π
3. **NaN Fields** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
4. **Empty Content** - –ø—É—Å—Ç—ã–µ answers/inputs
5. **Redirects** - –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ü–µ–ª–∏
6. **Circular Redirects** - —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

### ‚úÖ –ê–Ω–∞–ª–∏–∑ –≥—Ä–∞—Ñ–∞ –¥–∏–∞–ª–æ–≥–æ–≤
- **–ì–ª—É–±–∏–Ω–∞ –¥–∏–∞–ª–æ–≥–æ–≤**: max/min/avg –æ—Ç —Ç–æ—á–µ–∫ –≤—Ö–æ–¥–∞
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥–≥—Ä–∞—Ñ—ã**: –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Dead ends**: —É–∑–ª—ã –±–µ–∑ –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–≤—è–∑–µ–π
- **–¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞**: main –∏–Ω—Ç–µ–Ω—Ç—ã

### ‚úÖ –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ (–ù–û–í–û–ï!)
- **Risk Score** (0-100): –æ–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞
- **–¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞**: 5 —É—Ä–æ–≤–Ω–µ–π —Ä–∏—Å–∫–∞
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã**: risk_analysis.json
- **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –ª–µ–≥–µ–Ω–¥—ã**: –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞—Ö

### ‚úÖ –û—Ç—á—ë—Ç—ã
- `validation_report.json` - –ø–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `risk_analysis.json` - –∞–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ **(–ù–û–í–û–ï!)**
- CSV/JSON —Ä–µ–ø–æ—Ä—Ç—ã –ø–æ –∏–Ω—Ç–µ–Ω—Ç–∞–º, –ø–µ—Ä–µ—Ö–æ–¥–∞–º, —Å–ª–æ—Ç–∞–º

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone https://github.com/OlegKarenkikh/json2mermaid.git
cd json2mermaid

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# Graphviz (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
sudo apt-get install graphviz  # Ubuntu/Debian
brew install graphviz          # macOS
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –≤–∞—à —Ñ–∞–π–ª intent_data.jsonl
python generator_v5.0_main.py
```

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üöÄ DIALOG ANALYZER v5.1 - RISK-AWARE
üìú –†–µ–∂–∏–º: Read-Only Analysis with Risk Visualization
üõ°Ô∏è  –î–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è - —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤

üîç –í–ê–õ–ò–î–ê–¶–ò–Ø –î–ê–ù–ù–´–• v5.1
[1/6] –ü—Ä–æ–≤–µ—Ä–∫–∞ intent_id...
‚úÖ –í—Å–µ intent_id —É–Ω–∏–∫–∞–ª—å–Ω—ã (1250)

[2/6] –ü—Ä–æ–≤–µ—Ä–∫–∞ title...
‚ö†Ô∏è  –î—É–±–ª–∏–∫–∞—Ç—ã title: 3

[3/6] –ü—Ä–æ–≤–µ—Ä–∫–∞ NaN –∑–Ω–∞—á–µ–Ω–∏–π...
‚ö†Ô∏è  –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã NaN –∑–Ω–∞—á–µ–Ω–∏—è:
   record_type: 950 (76.0%)
   intent_settings: 120 (9.6%)

üõ°Ô∏è  –ê–ù–ê–õ–ò–ó –†–ò–°–ö–û–í
üü° –û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥ —Ä–∏—Å–∫–æ–≤: 67/100

üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º —Ä–∏—Å–∫–∞:
   CRITICAL  :    5 (0.4%)
   HIGH      :  120 (9.6%)
   MEDIUM    :   45 (3.6%)
   LOW       :   15 (1.2%)
   INFO      :   30 (2.4%)

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–ù–¢–ï–ù–¢–´ (5):
   - intent_12345
      ‚Ä¢ Intent has no answers - dialog will fail
      ‚Ä¢ Redirects to non-existent intent: missing_intent
```

---

## üìä –§–æ—Ä–º–∞—Ç risk_analysis.json

```json
{
  "report_timestamp": "2026-01-15T17:54:00",
  "version": "5.1",
  "summary": {
    "total_intents": 1250,
    "risk_score": 67,
    "severity_distribution": {
      "critical": 5,
      "high": 120,
      "medium": 45,
      "low": 15,
      "info": 30
    },
    "critical_intents": ["intent_12345", "intent_67890"],
    "high_risk_intents": ["intent_11111", ...]
  },
  "intents": {
    "intent_12345": {
      "intent_id": "intent_12345",
      "severity": "critical",
      "color": "#FF4444",
      "risk_count": 2,
      "risks": [
        {
          "type": "empty_answers",
          "description": "Intent has no answers - dialog will fail"
        },
        {
          "type": "broken_redirect",
          "description": "Redirects to non-existent intent: missing_intent"
        }
      ]
    }
  },
  "risk_legend": {
    "critical": {"color": "#FF4444", "level": 0},
    "high": {"color": "#FF8844", "level": 1},
    "medium": {"color": "#FFCC44", "level": 2},
    "low": {"color": "#88CCFF", "level": 3},
    "info": {"color": "#CCCCCC", "level": 4}
  }
}
```

---

## üìä Use Cases

### 1. Audit —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤
```bash
# –ê–Ω–∞–ª–∏–∑ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
python generator_v5.0_main.py

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∏—Å–∫–æ–≤
cat dialog_flow_analysis/risk_analysis.json | jq '.summary'
```

### 2. –í–∏–∑—É–∞–ª—å–Ω—ã–π review
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
# (–ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —É–∑–ª—ã –ø–æ–¥—Å–≤–µ—á–µ–Ω—ã –∫—Ä–∞—Å–Ω—ã–º/–æ—Ä–∞–Ω–∂–µ–≤—ã–º)
open dialog_flow_analysis/graph.svg
```

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
```python
import json

# –ü–æ–ª—É—á–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ–Ω—Ç—ã
with open('dialog_flow_analysis/risk_analysis.json') as f:
    data = json.load(f)
    critical = data['summary']['critical_intents']
    print(f"–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å: {len(critical)} –∏–Ω—Ç–µ–Ω—Ç–æ–≤")
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë• –ê–≤—Ç–æ—Ä—ã

Dialog Analyzer Team  
–í–µ—Ä—Å–∏—è: 5.1  
–î–∞—Ç–∞: 2026-01-15

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

[–°–æ–∑–¥–∞—Ç—å Issue](https://github.com/OlegKarenkikh/json2mermaid/issues)

---

**üîí Remember**: –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç **–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç** –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ. –û–Ω —Ç–æ–ª—å–∫–æ **–≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∏—Å–∫–∏** –∏ **–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã** –¥–ª—è —Ä—É—á–Ω–æ–≥–æ review.
